---
title: 'CH23-Continuous Integration'
description: 持續整合
---

## 前言

持續整合(CI，_Continuous Integration_)：對我們整個複雜和快速發展的生態系統進行持續的組裝和測試。

## TL;DR 內容提要

- CI系統決定使用什麼測試以及何時使用。
- 隨著程式碼庫的老化和規模的擴大，CI系統變得越來越有必要。
- CI應該在提交前最佳化更快、更可靠的測試，在提交後最佳化更慢、更不確定的測試。
- 可存取、可操作的反饋使CI系統變得更加有效。

## CI Concepts CI概念

一般來說，隨著問題向開發流程的"右側"發展，修復它們的成本會變得更高，原因如下：

- 它們必須由可能不熟悉問題程式碼更改的工程師來處理。
- 這些問題需要程式碼修改者做更多的工作來回憶和調查這些修改。
- 它們會對其他人產生負面影響，無論是工作中的工程師還是最終的終端使用者。

### Fast Feedback Loops 快速反饋循環

為了使bug的代價最小化，CI鼓勵我們使用快速反饋環(_fast feedback loops_)。每次我們將程式碼（或其他）變化整合到測試場景中並觀察結果時，我們就會得到一個新的反饋循環。反饋可以有很多形式；下面是一些常見的形式（按從快到慢的順序）:

- 本地開發的編輯->編譯->除錯循環
- 在提交前向程式碼修改者提供自動測試結果
- 兩個專案變更之間的整合錯誤，在兩個專案一起提交和測試後檢測（即提交後）。
- 當上遊服務部署其最新變化時，我們的專案和上游微服務的依賴關係之間的不相容，由我們臨時環境中的QA測試員發現。
- 在外部使用者之前使用功能的內部使用者的錯誤報告
- 外部使用者或媒體的錯誤或故障報告

### Automation 自動化

持續交付(CD，_Continuous Delivery_)：持續發佈候選版本，然後在一系列環境中測試這些候選版本，符合預期的版本有可能推到釋出產品階段。
