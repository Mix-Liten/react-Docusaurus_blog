---
title: 'CH01-What Is Software Engineering?'
description: 軟體工程是什麼？
---

## Time and Change 時間與變化

新手學習 programming 時，作業專案往往只有一個版本，不會做太多追加需求、優化、維護，這種狀況在教學環境中並不奇怪。

而在工作環境中，我們也常看到生命週期較短的專案(short-lived code)，比如新創公司通常沒有足夠的時間投資在基礎建設(infrastructure)，專案更版時完全重寫是經常發生的，不誇張的說，一個長期待在新創公司環境的工程師可能很少有機會維護同個專案超過兩年。

當一個原本是一次性短期專案要轉換為能持續十年的長期專案時，這個專案必須要能對不斷變化的外部因素做出反應，轉換過程可能會非常痛苦，原因有三個，且每一個都會使其他原因變得更複雜：

- 尚未完成部分更新時，有更多的期許與假設被提出
- 嘗試進行升級的工程師通常沒有類似的經驗
- 升級的規模過於龐大，一次性完成幾年份的升級，而不是循序漸進的升級

因此，在經歷過一次升級或中途放棄🤗 之後，高估後續升級的成本並決定“永不再升級”是非常合理的。這一切都取決於升級的成本、提供的價值以及相關專案的預期生命週期。

### Hyrum’s Law 海勒姆定律

如果你正在維護一個給其他工程師使用的專案，那麼 “可以用” 與 “可維護” 之間最重要的一環就是我們所說的海勒姆定律

> With a sufficient number of users of an API, it does not matter what you promise in the contract: all observable behaviors of your system will be depended on by somebody.

`當一個 API 有足夠多的使用者時，無論你在規格中承諾什麼都不再重要，所有在你系統裡被觀察到的行為都會被一些使用者直接依賴。`

這個定律說的事情非常實際，即使有最好的規劃、最好的工程師和可靠的 code review，我們也不能完全肯定系統已經符合釋出的規範文件和最佳實踐(best practice)。作為 API 所有者，可以透過明確地調整 interface 來獲得一定的靈活性和自由度，但是實務上，調整時的複雜性和難度還取決於使用者對你的 API 的一些可觀察行為的使用程度。如果使用者不依賴這些東西，那麼你的 API 將很容易更改。如果有足夠的時間和足夠的使用者，即使是最微小的變更也會是破壞性更新(breaking changes)；調整前需要做事前分析，且必須包含識別和解決這些被使用者依賴的缺陷的評估。

## Scale and Efficiency 規模和效率

讓我們來假設一種情況，如果某些更版的代價太大，它可能會被推遲。如果成本隨著時間的推移呈線性增長，最終出現一些意想不到的情況讓你必須更版，而此時你的專案比之前擴大數倍，過程中你會遇到許多問題，如 “完成全部的建置(build)需要多長時間？”、“升級到新語言版本需要多少成本？”，並且效率變得緩慢，這些問題很容易地變得像溫水煮青蛙；問題很容易慢慢惡化，而且不會只出現一次危機時刻。只有在整個團隊範圍內提高意識並致力於擴大規模，才可能保持對這些問題的關注。

Google 歷史上最具傳奇色彩的編譯器升級事件發生在 2006 年，當時全公司數千名工程師大約五年沒有升級過編譯器，大部分的程式碼只適用於單一版本，複數專案中混入許多`海勒姆定律`問題，加深團隊對於特定版本編譯器的依賴。

這個故事一點也不稀奇。許多公司的工程師都可以講述一個關於痛苦升級的故事。不同的是，我們在經歷了痛苦之後認識到了這一點，並開始關注技術和團隊變革，以克服規模問題，並將規模轉變為我們的優勢：自動化（這樣一個人就可以做到更多）、整合/一致性（這樣低級別的更改影響有限的問題範圍）和專業知識（以便少數人就可以做得更多）。

### Policies That Don’t Scale 不可擴充的策略

基礎架構團隊必須將內部使用者遷移到新版本，或者以向後相容的方式進行更新。

傳統的開發分支的使用是另一個有內在擴充問題的例子。一個團隊可能會發現，將大的功能分支合併到主幹中會破壞產品的穩定性，並得出結論：“我們需要對分支的合併時間進行控制，還要降低合併的頻率”。這很快會導致每個團隊或每個功能都有單獨的開發分支。每當任何分支被確定為“完整”時，都會對其進行測試併合併到主幹中，從而引發其他仍在開發分支上工作的工程師需要重新同步和測試，造成巨大的工作量。這樣的分支管理模式可以應用在小型團隊裡，管理 5 到 10 個這樣的分支。隨著團隊的規模（以及分支的數量）的增加，我們很快就會發現，為了完成同樣的任務，我們付出越來越多的管理成本。隨著規模的擴大，我們需要一種不同的方法。

### Policies That Scale Well 規模化策略

隨著團隊規模的擴大，專業知識和共享交流論壇提供了巨大的價值。隨著工程師在共享論壇中討論和回答問題，知識往往會傳播。新的專家人數不斷增加。如果你有 100 名工程師編寫 Java，那麼只要其中有一位友好且樂於助人的 Java 專家願意回答問題的話，很快就會培養成 100 名工程師編寫更好的 Java 程式碼。

### Shifting Left 左移

我們看到的一個普遍真理是，在開發人員的工作流程中發現的問題，通常可以降低成本。

考慮開發人員工作流程的時間表，從左到右，概念 -> 設計 -> 開發 -> 測試 -> 提交 -> 整合 -> 上線。在這條工作流程中，將發現問題的時機轉移到“左側”會使解決問題的成本更低，如下圖所示。

![*Timeline of* *the developer* *workflow*](https://software-engineering-at-google.gh.miniasp.com/zh-cn/Chapter-1_What_Is_Software_Engineering/images/figure%201-2.png)

## Trade-offs and Costs 權衡和成本

“成本”大致可以轉化為努力的方向，可以包括以下任何或所有因素：

- 財務成本（例如，金錢）
- 資源成本（例如，CPU時間）
- 人員成本（例如，工作量）
- 交易成本（例如，採取行動的成本是多少？）
- 機會成本（例如，不採取行動的成本是多少？）
- 社會成本（例如，這個選擇將對整個社會產生什麼影響？）

### Example: Markers 範例：白板筆

在許多團隊中，白板筆被視為貴重物品。它們受到嚴格的控制，而且總是供不應求。在任何的白板上，都有一半的白板筆是乾的，無法使用。你有多少次因為沒有一個好用的白板筆而中斷會議流程？多少次因為白板筆水用完而打斷思考？多少次所有的白板筆都不見了，大概是因為其他團隊的白板筆用完了，不得不拿走你的白板筆？這些事都只因為一個價格不到一美元的產品。

Google 往往在大多數工作區域都有未上鎖的櫃子，裡面裝滿了辦公用品，包括白板筆。只要稍加註意，就可以很容易地拿到各種顏色的幾十支白板筆。在某種程度上，我們做了一個明確的權衡：最佳化無障礙的頭腦風暴遠比防止有人拿著一堆白板筆亂跑要重要得多。

我們的目標是對我們所做的每件事都有同樣程度的關注和明確的成本/收益權衡，從辦公用品和員工津貼到開發者的日常體驗，再到如何提供和執行全球規模的服務。有時候這些決策是基於直覺或公認的最佳實踐，但前提是我們已經用盡各種方法來衡量或估計真正的潛在成本。

工程團隊的決策應該歸結為幾件事：

- 我們這樣做是因為我們必須這麼做（法律要求、客戶要求）。
- 我們之所以這樣做，是因為根據當前證據，這是我們當時能看到的最佳選擇（由一些適當的決策者決策）。

決策不應該是“我們這樣做是因為我這麼說。”
